<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>class</title>
	</head>
	<style>
		html{height: 96%;background-color: #FEFEFE;}
		body{height: 100%;}
		a{}
	</style>
	
	<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/all.css" />
	<body>
		<div id="class_body">
			<a class="return fa fa-angle-left fa-5x" onclick="javascript:history.back(-1)" style="color: #7CD5DB;"></a>
			<div id="class_top">
				<div id="class_week"></div>
			</div>
			
			<div id="class_head">
				<div id="class_head_month"></div>
				<div id="class_head_wDays">
					<div class="class_head_weekDay">周一</div>
					<div class="class_head_weekDay">周二</div>
					<div class="class_head_weekDay">周三</div>
					<div class="class_head_weekDay">周四</div>
					<div class="class_head_weekDay">周五</div>
					<div class="class_head_weekDay">周六</div>
					<div class="class_head_weekDay">周日</div>
				</div>
			</div>
			
			<div id="class_mian">
				<div id="class_main_times">
					<div class="class_main_time">
						<div class="class_main_time_c">8:00</div>
						<div class="class_main_time_n">1</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">8:55</div>
						<div class="class_main_time_n">2</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">10:00</div>
						<div class="class_main_time_n">3</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">10:55</div>
						<div class="class_main_time_n">4</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">14:00</div>
						<div class="class_main_time_n">5</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">14:55</div>
						<div class="class_main_time_n">6</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">16:00</div>
						<div class="class_main_time_n">7</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">16:55</div>
						<div class="class_main_time_n">8</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">19:00</div>
						<div class="class_main_time_n">9</div>
					</div>
					<div class="class_main_time">
						<div class="class_main_time_c">19:55</div>
						<div class="class_main_time_n">10</div>
					</div>
				</div>
				<div id="classes">
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					<div class="classBox"><div class="className"></div><div class="classAdress"></div></div>
					
				</div>
				
			</div>
		</div>
			<script src="js/jquery-3.2.1.min.js"></script>
			<script type="text/javascript" src="js/sha1&cookie.js" ></script>
		<script>
			//周数月份替换
			var weekNumber=$.cookie('weekNumber')-1+1;//让字符变成数字形式
			document.getElementById("class_week").innerHTML="第"+weekNumber+"周";
			var monthNuber=$.cookie('monthNumber');
			document.getElementById("class_head_month").innerHTML=monthNuber+"月";
			
			
			//背景色随机
			
			var backColors=["#ACC3E2","#ACC3E2","#ACC3E2","#ACC3E2","#9ECAAE","#9ECAAE","#9ECAAE","#94C9AB","#94C9AB","#94C9AB"];
			
			//连接
			//修改课程信息
			
			
			var userData = $.cookie('userData');
				if(userData){
				//JSON.parse() 将字符串解析为对象，方便使用
				  userData = JSON.parse(userData);   
				};
			var clsName=document.getElementsByClassName("className");
			$.ajax({
				    url:"https://api.huthelper.cn/api/v3/Get/schedule/"+userData.data.studentKH+"/"+userData.data.remember_code_app, //请求地址
				    type:'POST',   //请求方式
				    data:{}, //请求参数
				    jsonp: "callback",
				    async : true, 
				    crossDomain: true,
				    dataType:"json"     // 返回值类型的设定
				}).done(function(res) {
					console.log("链接成功");
					console.log(res.data);
					var num=0;
					console.log(res.data[num]);
					for(;res.data[num];num++){
						var xqj=res.data[num].xqj-1+1;//使字符数字转化成数字
						var djj=res.data[num].djj-1+1;
						var dsz=res.data[num].dsz-1+1;
						var qsz=res.data[num].qsz-1+1;
						var jsz=res.data[num].jsz-1+1;
						if(qsz>weekNumber||jsz<weekNumber){continue;}
						if(dsz==1&&weekNumber%2==0){continue;}
						if(dsz==2&&weekNumber%2!=0){continue;}
						var boxNum = ((djj+1)/2-1)*7+xqj-1;
						var random = Math.round(Math.random()*10)-1;
						if(random<0) random++;
						console.log(random);
						document.getElementsByClassName("classBox")[boxNum].style.backgroundColor=backColors[random];
						document.getElementsByClassName("className")[boxNum].innerHTML=res.data[num].name+"@";
						document.getElementsByClassName("classAdress")[boxNum].innerHTML=res.data[num].room;
					}
						}).fail(function(res) {
							console.log("链接错误");
						});
			
			
			
		</script>
	</body>
</html>
